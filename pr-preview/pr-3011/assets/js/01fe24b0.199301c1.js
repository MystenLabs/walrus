"use strict";(globalThis.webpackChunkwalrus_docusaurus=globalThis.webpackChunkwalrus_docusaurus||[]).push([[2717],{1406(e,s,r){r.r(s),r.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>n,toc:()=>l});let n=JSON.parse('{"id":"system-overview/core-concepts","title":"Walrus Fundamentals","description":"Technical reference for Walrus fundamentals, including architecture, data storage, and data retrieval.","source":"@site/../content/system-overview/core-concepts.mdx","sourceDirName":"system-overview","slug":"/system-overview/core-concepts","permalink":"/walrus/pr-preview/pr-3011/docs/system-overview/core-concepts","draft":false,"unlisted":false,"editUrl":"https://github.com/MystenLabs/walrus/tree/main/docs/../content/system-overview/core-concepts.mdx","tags":[],"version":"current","frontMatter":{"title":"Walrus Fundamentals","description":"Technical reference for Walrus fundamentals, including architecture, data storage, and data retrieval.","keywords":["placeholder"]},"sidebar":"docsSidebar","previous":{"title":"Advanced Setup","permalink":"/walrus/pr-preview/pr-3011/docs/getting-started/advanced-setup"},"next":{"title":"RedStuff Encoding Algorithm","permalink":"/walrus/pr-preview/pr-3011/docs/system-overview/red-stuff"}}');var t=r(2615),o=r(5756);let i={title:"Walrus Fundamentals",description:"Technical reference for Walrus fundamentals, including architecture, data storage, and data retrieval.",keywords:["placeholder"]},a,c={},l=[{value:"Walrus architecture",id:"walrus-architecture",level:2},{value:"Users",id:"users",level:4},{value:"Storage nodes",id:"storage-nodes",level:4},{value:"Blockchain coordination",id:"blockchain-coordination",level:4},{value:"Events",id:"events",level:4},{value:"Additional infrastructure",id:"additional-infrastructure",level:2},{value:"Aggregators",id:"aggregators",level:4},{value:"Publishers",id:"publishers",level:4},{value:"Data storage process",id:"data-storage-process",level:2},{value:"Data retrieval process",id:"data-retrieval-process",level:2}];function d(e){let s={a:"a",code:"code",h2:"h2",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components},{Term:r}=s;return r||function(e,s){throw Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Term",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.p,{children:["Data is stored on Walrus as ",(0,t.jsx)(r,{lookup:"Blob",children:"blobs"}),". Each ","blob"," is an immutable array of bytes. Any type of file, such as text, video, or source code, can be stored on Walrus. All ","blobs"," uploaded to Walrus are publicly available. To secure data on Walrus, consider an ",(0,t.jsx)(s.a,{href:"https://seal-docs.wal.app/",children:"encryption service like Seal"}),"."]}),"\n",(0,t.jsxs)(s.p,{children:["Sui is a blockchain that supports ",(0,t.jsx)(s.a,{href:"https://docs.sui.io/concepts/transactions/prog-txn-blocks",children:"programmable transactions"}),". Walrus binds all ","blobs"," to objects on Sui. Walrus ","blobs"," are represented as Sui objects of type ",(0,t.jsx)(s.code,{children:"Blob"}),"."]}),"\n",(0,t.jsx)(s.h2,{id:"walrus-architecture",children:"Walrus architecture"}),"\n",(0,t.jsx)(s.p,{children:"The Walrus architecture is built on the following key actors:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Users:"})," Clients that store and retrieve data ","blobs","."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsxs)(s.strong,{children:[(0,t.jsx)(r,{lookup:"Storage node",children:"Storage nodes"}),":"]})," Distributed ","storage nodes"," that hold erasure-coded data."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Blockchain coordination:"})," The ",(0,t.jsx)(s.a,{href:"https://docs.sui.io/",children:"Sui blockchain"})," manages payments, metadata, and system orchestration."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h4,{id:"users",children:"Users"}),"\n",(0,t.jsxs)(s.p,{children:["Users ",(0,t.jsx)(s.a,{href:"/docs/walrus-client/storing-blobs",children:"interact with Walrus"})," through clients to store and read ","blobs",", which are identified by their ",(0,t.jsx)(r,{lookup:"Blob ID",children:"blob ID"}),". Users engage with the system in 2 primary ways:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Storage: Users store new ","blobs"," and pay ",(0,t.jsx)(s.a,{href:"/docs/system-overview/storage-costs",children:"required costs"})," for ",(0,t.jsx)(s.a,{href:"/docs/system-overview/operations#store",children:"write"})," and ",(0,t.jsx)(s.a,{href:"/docs/system-overview/operations#read",children:"non-best-effort read"})," operations."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Availability: Users can ",(0,t.jsx)(s.a,{href:"/docs/system-overview/operations#certify-availability",children:"prove a blob's availability to third parties"})," without the cost of transmitting the full ","blob","."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Users might also exhibit malicious behavior, such as refusing to pay for services, modifying or deleting ","blobs"," without authorization, or exhausting ","storage node"," resources."]}),"\n",(0,t.jsx)(s.h4,{id:"storage-nodes",children:"Storage nodes"}),"\n",(0,t.jsxs)(s.p,{children:["Storage nodes"," manage the actual data storage on Walrus. Each ","storage node"," holds 1 or more shards during a ",(0,t.jsx)(r,{lookup:"Storage epoch",children:"storage epoch"}),". At any given ","storage epoch",", a ","storage node"," associates with 1 or more shards."]}),"\n",(0,t.jsxs)(s.p,{children:["Every ","blob"," undergoes ",(0,t.jsx)(s.a,{href:"/docs/system-overview/red-stuff",children:"erasure encoding"}),", which splits it into many ",(0,t.jsx)(s.strong,{children:"slivers"}),". The slivers from each stored ","blob"," are distributed across all shards in the system. A node stores all slivers belonging to its assigned shards and serves them upon request."]}),"\n",(0,t.jsxs)(s.p,{children:["A smart contract on Sui controls how shards are assigned to ","storage nodes",". These assignments occur within storage epochs, which last 2 weeks on Mainnet. Walrus assumes that more than 2/3 of shards are managed by honest ","storage nodes"," within each ","storage epoch",". The system tolerates up to 1/3 of shards being controlled by malicious or faulty ","storage nodes",". This tolerance level applies both within individual storage epochs and across transitions between epochs."]}),"\n",(0,t.jsxs)(s.p,{children:["Some assurance properties ensure the correct internal processes of Walrus ","storage nodes",". For the purposes of defining these, an ",(0,t.jsx)(s.strong,{children:(0,t.jsx)(r,{lookup:"Inconsistency proof",children:"inconsistency proof"})})," proves that a ","blob ID"," was stored by a ",(0,t.jsx)(r,{lookup:"User",children:"user"})," that incorrectly encoded a ","blob",":"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsxs)(s.strong,{children:[(0,t.jsx)(r,{lookup:"Shard recovery",children:"Sliver recovery"}),":"]})," After the ",(0,t.jsx)(r,{lookup:"Point of availability",children:"PoA"}),", for a ","blob ID"," stored by a correct ","user",", a ","storage node"," can always recover the correct slivers for its shards for this ","blob ID","."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Inconsistency detection:"})," After the ","PoA",", if a correct ","storage node"," cannot recover a ",(0,t.jsx)(r,{lookup:"Sliver",children:"sliver"}),", it can produce an ","inconsistency proof"," for the ","blob ID","."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Encoding protection:"})," If a ","blob ID"," is stored by a correct ","user",", an ","inconsistency proof"," cannot be derived for it."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsxs)(s.strong,{children:["Inconsistent ","blob"," handling:"]})," A read by a correct ","user"," for a ","blob ID"," for which an ","inconsistency proof"," might exist returns ",(0,t.jsx)(s.code,{children:"None"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h4,{id:"blockchain-coordination",children:"Blockchain coordination"}),"\n",(0,t.jsxs)(s.p,{children:["All clients and ","storage nodes"," run an instance of the Sui ",(0,t.jsx)(r,{lookup:"Client",children:"client"}),", which provides the coordination layer for the entire system. The Sui network manages several operations, including:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Payments:"})," Processing storage fees and service payments."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Resource management:"})," Allocating and tracking storage capacity."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsxs)(s.strong,{children:[(0,t.jsx)(r,{lookup:"Shard",children:"Shard"})," assignment:"]})," Mapping shards to ","storage nodes","."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Metadata management:"})," Storing ","blob"," certificates and system state."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Walrus defines a number of objects and smart contracts on Sui:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["A shared system object records and manages the current committee of ","storage nodes","."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Storage resources represent empty storage space that you can use to store ","blobs","."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Blob"," resources represent ","blobs"," being registered and certified as stored."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Changes to these objects emit ",(0,t.jsx)(s.a,{href:"#events",children:"Walrus-related events"}),"."]}),"\n",(0,t.jsxs)(s.p,{children:["You can find the Walrus system object ID in the Walrus ",(0,t.jsxs)(s.a,{href:"/docs/getting-started/advanced-setup#configuration",children:[(0,t.jsx)(s.code,{children:"client_config.yaml"})," file"]}),". You can use any ",(0,t.jsx)(s.a,{href:"https://suivision.xyz/",children:"Sui explorer"})," to view its content."]}),"\n",(0,t.jsx)(s.h4,{id:"events",children:"Events"}),"\n",(0,t.jsxs)(s.p,{children:["Storage nodes"," monitor blockchain events to coordinate their operations and respond to system changes. Walrus uses ",(0,t.jsx)(s.a,{href:"https://github.com/MystenLabs/walrus/blob/main/contracts/walrus/sources/system/events.move",children:"custom Sui events"})," to notify ","storage nodes"," of updates concerning stored ","blobs"," and the state of the network. Applications can also use ",(0,t.jsx)(s.a,{href:"https://docs.sui.io/references/sui-api",children:"Sui RPC facilities"})," to observe Walrus-related events."]}),"\n",(0,t.jsxs)(s.p,{children:["When a ","blob"," is first registered, a ",(0,t.jsx)(s.a,{href:"https://github.com/MystenLabs/walrus/blob/main/contracts/walrus/sources/system/events.move#L12-L23",children:(0,t.jsx)(s.code,{children:"BlobRegistered"})})," event is emitted that informs ","storage nodes"," that they should expect slivers associated with its ","blob ID",". When the ","blob"," is certified, a ",(0,t.jsx)(s.a,{href:"https://github.com/MystenLabs/walrus/blob/main/contracts/walrus/sources/system/events.move#L25-L35",children:(0,t.jsx)(s.code,{children:"BlobCertified"})})," event is emitted containing information about the ","blob ID"," and the epoch after which the ","blob"," is deleted. Before that epoch, the ","blob"," is guaranteed to be available."]}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.a,{href:"https://github.com/MystenLabs/walrus/blob/main/contracts/walrus/sources/system/events.move#L25-L35",children:(0,t.jsx)(s.code,{children:"BlobCertified"})})," event with ",(0,t.jsx)(s.code,{children:"deletable"})," set to false and an ",(0,t.jsx)(s.code,{children:"end_epoch"})," in the future indicates that the ","blob"," is available until this epoch. A light ","client"," proof that this event was emitted for a ","blob ID"," constitutes a proof of availability for the data with this ","blob ID",". When a ",(0,t.jsx)(r,{lookup:"Deletable blob",children:"deletable blob"})," is deleted, a ",(0,t.jsx)(s.a,{href:"https://github.com/MystenLabs/walrus/blob/main/contracts/walrus/sources/system/events.move#L37-L46",children:(0,t.jsx)(s.code,{children:"BlobDeleted"})})," event is emitted."]}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.a,{href:"https://github.com/MystenLabs/walrus/blob/main/contracts/walrus/sources/system/events.move#L48-L52",children:(0,t.jsx)(s.code,{children:"InvalidBlobID"})})," event is emitted when ","storage nodes"," detect an incorrectly encoded ","blob",". Anyone attempting a read on such a ","blob"," also detects it as invalid."]}),"\n",(0,t.jsxs)(s.p,{children:["System-level events such as ",(0,t.jsx)(s.a,{href:"https://github.com/MystenLabs/walrus/blob/main/contracts/walrus/sources/system/events.move#L54-L57",children:(0,t.jsx)(s.code,{children:"EpochChangeStart"})})," and ",(0,t.jsx)(s.a,{href:"https://github.com/MystenLabs/walrus/blob/main/contracts/walrus/sources/system/events.move#L59-L63",children:(0,t.jsx)(s.code,{children:"EpochChangeDone"})})," indicate transitions between epochs. Associated events such as ",(0,t.jsx)(s.a,{href:"https://github.com/MystenLabs/walrus/blob/main/contracts/walrus/sources/system/events.move#L65-L69",children:(0,t.jsx)(s.code,{children:"ShardsReceived"})}),", ",(0,t.jsx)(s.a,{href:"https://github.com/MystenLabs/walrus/blob/main/contracts/walrus/sources/system/events.move#L71-L74",children:(0,t.jsx)(s.code,{children:"EpochParametersSelected"})}),", and ",(0,t.jsx)(s.a,{href:"https://github.com/MystenLabs/walrus/blob/main/contracts/walrus/sources/system/events.move#L76-L80",children:(0,t.jsx)(s.code,{children:"ShardRecoveryStart"})})," indicate ","storage node","-level events related to epoch transitions, ","shard"," migrations, and epoch parameters."]}),"\n",(0,t.jsx)(s.h2,{id:"additional-infrastructure",children:"Additional infrastructure"}),"\n",(0,t.jsx)(s.p,{children:"Walrus supports additional infrastructure actors that can operate in a permissionless way. These infrastructure components are optional."}),"\n",(0,t.jsx)(s.h4,{id:"aggregators",children:"Aggregators"}),"\n",(0,t.jsxs)(s.p,{children:["Aggregators are clients that reconstruct ","blobs"," from individual slivers and serve them to users through protocols like HTTP. Aggregators are optional because end users can reconstruct ","blobs"," directly from ","storage nodes"," or run an instance of a local ",(0,t.jsx)(r,{lookup:"Aggregator",children:"aggregator"})," themselves."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Caches"})," are aggregators with additional caching functionality to decrease latency and reduce load on ","storage nodes",". ",(0,t.jsx)(r,{lookup:"Cache",children:"Cache"})," infrastructures can also act as CDNs, split the cost of ",(0,t.jsx)(r,{lookup:"Reconstruction",children:"blob reconstruction"})," over many requests, and provide better network connectivity. A ","client"," can always verify that reads from ","cache"," infrastructures are correct."]}),"\n",(0,t.jsx)(s.h4,{id:"publishers",children:"Publishers"}),"\n",(0,t.jsxs)(s.p,{children:["Publishers are clients that help end users store ","blobs"," through protocols like HTTP while using less bandwidth and offering custom logic. Publishers are optional because users can directly interact with Sui and ","storage nodes"," to store ","blobs",". End users can verify that a ",(0,t.jsx)(r,{lookup:"Publisher",children:"publisher"})," performed correctly by checking for an on-chain event associated with the ","blob","'s ",(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.a,{href:"/docs/system-overview/core-concepts",children:"point of availability"})}),". Users can then either read the ","blob"," from Walrus to confirm it is accessible, or encode the ","blob"," themselves and compare the result to the ","blob ID"," in the certificate. Publishers streamline the storage process by:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Receiving a ","blob"," through protocols like HTTP"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Encoding the ","blob"," into slivers"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Distributing slivers to ","storage nodes"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Collecting ","storage node"," signatures"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Aggregating signatures into a certificate"}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Performing all required on-chain actions"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"data-storage-process",children:"Data storage process"}),"\n",(0,t.jsx)(s.p,{children:"When data is uploaded to Walrus, the following process occurs:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["A ","user"," sends a request to upload data to Walrus through a ","Walrus client",". A ","client"," binary can be run locally and provides the following tools to perform Walrus operations:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["A ",(0,t.jsx)(s.a,{href:"/docs/walrus-client/storing-blobs",children:"command line interface (CLI)"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["A ",(0,t.jsx)(s.a,{href:"/docs/walrus-client/json-mode",children:"JSON API"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["An ",(0,t.jsx)(s.a,{href:"/docs/http-api/storing-blobs",children:"HTTP API"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Alternatively, you can use a ","publisher"," service."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["The ","client"," or ","publisher"," service determines the required storage space for the data and purchases a ",(0,t.jsx)(s.code,{children:"Storage"})," object on Sui to reserve that space for the configured storage duration. A ",(0,t.jsx)(s.code,{children:"Blob"})," object is always associated with a ",(0,t.jsx)(s.code,{children:"Storage"})," object."]}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"Blob"})," and ",(0,t.jsx)(s.code,{children:"Storage"})," objects have the following fields, which you can query using the ",(0,t.jsx)(s.a,{href:"https://sdk.mystenlabs.com/typescript",children:"Sui SDKs"}),":"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-move",children:"    /// Reservation for storage for a given period, which is inclusive start, exclusive end.\n    public struct Storage has key, store {\n        id: UID,\n        start_epoch: u32,\n        end_epoch: u32,\n        storage_size: u64,\n    }\n\n    /// The blob structure represents a blob that has been registered to with some storage,\n    /// and then may eventually be certified as being available in the system.\n    public struct Blob has key, store {\n        id: UID,\n        registered_epoch: u32,\n        blob_id: u256,\n        size: u64,\n        encoding_type: u8,\n        // Stores the epoch first certified if any.\n        certified_epoch: option::Option<u32>,\n        storage: Storage,\n        // Marks if this blob can be deleted.\n        deletable: bool,\n    }\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Public functions associated with these objects can be found in the respective ",(0,t.jsx)(s.a,{href:"https://github.com/MystenLabs/walrus/tree/main/contracts/walrus/sources/system/storage_resource.move",children:(0,t.jsx)(s.code,{children:"storage_resource"})})," and ",(0,t.jsx)(s.a,{href:"https://github.com/MystenLabs/walrus/tree/main/contracts/walrus/sources/system/blob.move",children:(0,t.jsx)(s.code,{children:"blob"})})," Move modules. Storage resources can be split and merged in time and data capacity, and can be transferred between users, which allows complex contracts to be created."]}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["The ","blob"," is encoded using the ",(0,t.jsx)(s.a,{href:"/docs/system-overview/red-stuff",children:"RedStuff"})," erasure code, producing slivers and a ","blob ID",". The same content always yields the same ","blob ID","."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["The ","blob"," is registered, indicating to the ","storage nodes"," that they should expect slivers to be stored. The storage resource on Sui is updated with the ","blob","'s ID, size, and storage duration. This emits an event."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Slivers are distributed to each node. When a node receives a ","sliver",", it signs a receipt."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["2/3 of the receipt signatures are aggregated into an availability certificate. The ","blob"," is certified, indicating that a sufficient number of slivers have been stored to guarantee the ","blob","'s availability. When a ","blob"," is certified, its ",(0,t.jsx)(s.code,{children:"certified_epoch"})," field contains the epoch in which it was certified. A certified ","blob"," remains available for the duration specified by its associated storage resource."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"data-retrieval-process",children:"Data retrieval process"}),"\n",(0,t.jsx)(s.p,{children:"When data is retrieved from Walrus, the following process occurs:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["The ","client"," or an ","aggregator"," reads the ","blob ID"," of the ","blob"," to fetch."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["The ","client"," or ","aggregator"," queries Sui or a ","storage node"," to get the ","blob","'s metadata. The metadata includes the authenticated signatures for each ","sliver","."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["The ","client"," sends read requests to ","storage nodes"," for the slivers corresponding to that ","blob ID","."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Each returned ","sliver"," is checked against its authenticated signature from the metadata to ensure integrity."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Once enough valid slivers are collected (>1/3 quorum), the ","client"," runs the ",(0,t.jsx)(s.a,{href:"/docs/system-overview/red-stuff",children:"RedStuff"})," decoding algorithm to reconstruct the original ","blob","."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["The ","client"," verifies the reconstructed data by checking hashes of a subset of primary slivers (at least the first 334) against the metadata."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["If verification passes, the ","client"," returns the ","blob"," bytes to the caller. If verification fails or an ","inconsistency proof"," exists, the read returns an error or ",(0,t.jsx)(s.code,{children:"None"}),"."]}),"\n"]}),"\n"]})]})}function h(e={}){let{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},5756(e,s,r){r.d(s,{R:()=>i,x:()=>a});var n=r(9471);let t={},o=n.createContext(t);function i(e){let s=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),n.createElement(o.Provider,{value:s},e.children)}}}]);