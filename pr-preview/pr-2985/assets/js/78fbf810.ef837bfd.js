"use strict";(globalThis.webpackChunkwalrus_docusaurus=globalThis.webpackChunkwalrus_docusaurus||[]).push([[4447],{446(e,s,t){t.d(s,{A:()=>o});let o=t.p+"assets/files/walrus_whitepaper_v2-31701a689e75cc47048440b56789f388.pdf"},5756(e,s,t){t.d(s,{R:()=>r,x:()=>a});var o=t(9471);let i={},n=o.createContext(i);function r(e){let s=o.useContext(n);return o.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(n.Provider,{value:s},e.children)}},7661(e,s,t){t.r(s),t.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>l});let o=JSON.parse('{"id":"system-overview/storage-costs","title":"Storage Costs","description":"Comprehensive guide to Walrus storage costs including WAL tokens, SUI gas fees, and cost optimization strategies.","source":"@site/../content/system-overview/storage-costs.mdx","sourceDirName":"system-overview","slug":"/system-overview/storage-costs","permalink":"/walrus/pr-preview/pr-2985/docs/system-overview/storage-costs","draft":false,"unlisted":false,"editUrl":"https://github.com/MystenLabs/walrus/tree/main/docs/../content/system-overview/storage-costs.mdx","tags":[],"version":"current","frontMatter":{"title":"Storage Costs","description":"Comprehensive guide to Walrus storage costs including WAL tokens, SUI gas fees, and cost optimization strategies.","keywords":["walrus","storage costs","wal token","sui gas","cost optimization","storage resources","upload costs","tokenomics"]},"sidebar":"docsSidebar","previous":{"title":"Available Networks","permalink":"/walrus/pr-preview/pr-2985/docs/system-overview/available-networks"},"next":{"title":"Public Aggregators and Publishers","permalink":"/walrus/pr-preview/pr-2985/docs/system-overview/public-aggregators-and-publishers"}}');var i=t(2615),n=t(5756);let r={title:"Storage Costs",description:"Comprehensive guide to Walrus storage costs including WAL tokens, SUI gas fees, and cost optimization strategies.",keywords:["walrus","storage costs","wal token","sui gas","cost optimization","storage resources","upload costs","tokenomics"]},a,c={},l=[{value:"Cost calculator",id:"cost-calculator",level:2},{value:"Storage resources",id:"storage-resources",level:4},{value:"Storage fund",id:"storage-fund",level:4},{value:"Upload fees",id:"upload-fees",level:4},{value:"Sui transaction fees",id:"sui-transaction-fees",level:4},{value:"Sui object storage",id:"sui-object-storage",level:4},{value:"Measuring costs",id:"measuring-costs",level:2},{value:"Estimating costs without submitting transactions",id:"estimating-costs-without-submitting-transactions",level:4},{value:"Storage resource lifecycle",id:"storage-resource-lifecycle",level:2},{value:"Acquiring storage",id:"acquiring-storage",level:4},{value:"Assigning a blob ID",id:"assigning-a-blob-id",level:4},{value:"Certifying availability",id:"certifying-availability",level:4},{value:"Extending storage",id:"extending-storage",level:4},{value:"Handling inconsistent blobs",id:"handling-inconsistent-blobs",level:4},{value:"Acquiring storage resources",id:"acquiring-storage-resources",level:2},{value:"Optimizing costs",id:"optimizing-costs",level:2},{value:"Reducing costs for small blobs with Quilt",id:"reducing-costs-for-small-blobs-with-quilt",level:4},{value:"Buy storage resources in bulk",id:"buy-storage-resources-in-bulk",level:4},{value:"Use Sui PTBs efficiently",id:"use-sui-ptbs-efficiently",level:4},{value:"Reclaim and reuse storage",id:"reclaim-and-reuse-storage",level:4},{value:"Batch blob operations",id:"batch-blob-operations",level:4},{value:"Manage blob object lifecycle",id:"manage-blob-object-lifecycle",level:4}];function d(e){let s={a:"a",admonition:"admonition",code:"code",h2:"h2",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,n.R)(),...e.components},{Term:o}=s;return o||function(e,s){throw Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Term",!0),(0,i.jsxs)(i.Fragment,{children:["\n",(0,i.jsxs)(s.p,{children:["Storing ",(0,i.jsx)(o,{lookup:"Blob",children:"blobs"})," on Walrus Mainnet incurs 2 separate costs:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(o,{lookup:"WAL",children:"WAL"})})," for the storage operation. See ",(0,i.jsx)(s.a,{href:"https://www.walrus.xyz/wal-token",children:"WAL tokenomics"})," and the ",(0,i.jsx)(s.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(446).A+"",children:"Walrus delegated proof of stake system"})," for more details."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"SUI"})," for executing transactions on Sui Mainnet. See ",(0,i.jsx)(s.a,{href:"https://docs.sui.io/concepts/tokenomics",children:"SUI tokenomics"})," and ",(0,i.jsx)(s.a,{href:"https://docs.sui.io/concepts/tokenomics/gas-in-sui",children:"SUI gas fee calculation"})," for more details."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.admonition,{type:"caution",children:(0,i.jsxs)(s.p,{children:["There are plans to stabilize costs to USD so that storage fees are not subject to ","WAL"," fluctuations."]})}),"\n",(0,i.jsx)(s.h2,{id:"cost-calculator",children:"Cost calculator"}),"\n",(0,i.jsxs)(s.p,{children:["Use the ",(0,i.jsx)(s.a,{href:"https://costcalculator.wal.app/",children:"Walrus Cost Calculator"})," to estimate total storage costs interactively."]}),"\n",(0,i.jsxs)(s.p,{children:["Walrus storage costs are a combination of ","WAL"," and SUI fees incurred from storage resources, upload costs, Sui transaction fees, and Sui object storage resources."]}),"\n",(0,i.jsx)(s.h4,{id:"storage-resources",children:"Storage resources"}),"\n",(0,i.jsxs)(s.p,{children:["You need a storage resource with adequate capacity and epoch duration to store a ","blob",". You can purchase storage resources from the Walrus system contract by paying ","WAL",", which is used by the ",(0,i.jsx)(o,{lookup:"Client",children:"client"})," and aggregators while free space is available, or you can receive them from other parties."]}),"\n",(0,i.jsxs)(s.p,{children:["The cost of a storage resource is based on the ","blob","'s ",(0,i.jsx)(s.strong,{children:"encoded size"}),": the erasure-coded size of the ","blob"," (roughly 5x the original) plus fixed per-",(0,i.jsx)(o,{lookup:"Blob metadata",children:"blob metadata"})," of up to ~64 MB. For ","blobs"," smaller than 10 MB, this fixed metadata cost dominates. See ",(0,i.jsx)(s.a,{href:"#reducing-costs-for-small-blobs-with-quilt",children:"Reducing costs for small blobs"})," for optimization strategies."]}),"\n",(0,i.jsx)(s.h4,{id:"storage-fund",children:"Storage fund"}),"\n",(0,i.jsxs)(s.p,{children:["The storage fund holds ","WAL"," for storing ","blobs"," across 1 or more epochs. When you purchase storage space from the system object, payments are allocated across the relevant epochs. At the end of each epoch, funds are distributed to ",(0,i.jsx)(o,{lookup:"Storage node",children:"storage nodes"})," based on performance, which is determined through light audits that nodes conduct on each other."]}),"\n",(0,i.jsx)(s.h4,{id:"upload-fees",children:"Upload fees"}),"\n",(0,i.jsxs)(s.p,{children:["Registering a ","blob"," costs ","WAL"," to cover upload costs. This ensures that deleting ","blobs"," and reusing storage resources remains sustainable for the system."]}),"\n",(0,i.jsx)(s.h4,{id:"sui-transaction-fees",children:"Sui transaction fees"}),"\n",(0,i.jsxs)(s.p,{children:["Storing a ","blob"," involves up to 3 on-chain ",(0,i.jsx)(s.a,{href:"https://docs.sui.io/concepts/transactions",children:"Sui transactions"}),", each of which incurs SUI gas fees."]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Acquiring a storage resource (",(0,i.jsx)(s.code,{children:"reserve_space"}),")"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Registering the ","blob"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Certifying the ","blob"," as available"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"sui-object-storage",children:"Sui object storage"}),"\n",(0,i.jsxs)(s.p,{children:["Walrus ","blobs"," are represented as ",(0,i.jsx)(s.a,{href:"https://docs.sui.io/guides/developer/objects/object-model",children:"Sui objects"})," on-chain. Creating these objects deposits SUI into the ",(0,i.jsx)(s.a,{href:"https://docs.sui.io/concepts/sui-architecture/sui-storage#storage-fund",children:"Sui storage fund"}),", most of which is refunded when you delete the objects."]}),"\n",(0,i.jsx)(s.h2,{id:"measuring-costs",children:"Measuring costs"}),"\n",(0,i.jsxs)(s.p,{children:["The most accurate way to measure costs is to upload a ","blob"," and observe SUI and ","WAL"," costs in a Sui explorer or through Sui RPC calls. ","Blob"," contents do not affect cost."]}),"\n",(0,i.jsx)(s.p,{children:"For example, the following command results in 2 transactions:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sh",children:"$ walrus store <FILENAME> --epochs 1\n"})}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["The first transaction calls ",(0,i.jsx)(s.code,{children:"reserve_space"})," (if no appropriately sized storage resource already exists) and ",(0,i.jsx)(s.code,{children:"register_blob"}),". This affects both SUI and ","WAL"," balances. The SUI cost of ",(0,i.jsx)(s.code,{children:"register_blob"})," is independent of ","blob"," size or epoch lifetime. ","WAL"," costs are linear in encoded size (both erasure coding and metadata). The SUI cost of ",(0,i.jsx)(s.code,{children:"reserve_space"})," grows with epoch count, and ","WAL"," costs scale with both encoded size and epoch count."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["The second transaction calls ",(0,i.jsx)(s.code,{children:"certify_blob"})," and only affects the SUI balance. Its SUI cost is independent of ","blob"," size or epoch lifetime."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["To observe the ",(0,i.jsx)(s.a,{href:"https://docs.sui.io/concepts/sui-architecture/sui-storage#storage-rebates",children:"storage rebate"}),", burn the resulting ","blob"," object:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sh",children:"$ walrus burn-blobs --object-ids <BLOB_OBJECT_ID>\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Burning a ","blob","'s corresponding object on Sui does not delete the ","blob"," data on Walrus."]}),"\n",(0,i.jsx)(s.h4,{id:"estimating-costs-without-submitting-transactions",children:"Estimating costs without submitting transactions"}),"\n",(0,i.jsx)(s.p,{children:"These commands help estimate costs without submitting transactions:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"walrus info"})," \u2014 displays current costs for buying storage resources and uploads."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"walrus store --dry-run ..."})," \u2014 outputs the encoded size used in ","WAL"," cost calculations without submitting any transactions."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"storage-resource-lifecycle",children:"Storage resource lifecycle"}),"\n",(0,i.jsx)(s.h4,{id:"acquiring-storage",children:"Acquiring storage"}),"\n",(0,i.jsx)(s.p,{children:"Purchase storage space from the system object by paying into the storage fund for a specified duration of 1 or more epochs. You can split, merge, or transfer storage resources. The maximum duration you can purchase in advance is approximately 2 years."}),"\n",(0,i.jsxs)(s.h4,{id:"assigning-a-blob-id",children:["Assigning a ",(0,i.jsx)(o,{lookup:"Blob ID",children:"blob ID"})]}),"\n",(0,i.jsxs)(s.p,{children:["After acquiring storage, assign a ","blob ID"," to indicate intent to store. This emits a Move resource event, signaling ","storage nodes"," to expect and authorize off-chain storage operations."]}),"\n",(0,i.jsx)(s.h4,{id:"certifying-availability",children:"Certifying availability"}),"\n",(0,i.jsxs)(s.p,{children:["After uploading ","blob"," data off-chain, certify availability on-chain:"]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["Upload ","blob"," slivers to ","storage nodes"," off-chain."]}),"\n",(0,i.jsxs)(s.li,{children:["Receive an availability certificate from ","storage nodes","."]}),"\n",(0,i.jsx)(s.li,{children:"Upload the certificate on-chain."}),"\n",(0,i.jsx)(s.li,{children:"The system checks the certificate against the current Walrus committee."}),"\n",(0,i.jsxs)(s.li,{children:["If valid, the system emits an availability event for the ","blob ID","."]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["The availability event marks the ",(0,i.jsx)(s.a,{href:"/docs/system-overview/core-concepts",children:"point of availability"})," for the ","blob",", after which Walrus guarantees its availability for the specified duration."]}),"\n",(0,i.jsx)(s.h4,{id:"extending-storage",children:"Extending storage"}),"\n",(0,i.jsxs)(s.p,{children:["You can extend a certified ","blob","'s storage at any time by attaching a storage object with a longer ",(0,i.jsx)(o,{lookup:"Expiry",children:"expiry"})," period. Smart contracts can use this mechanism to extend ","blob"," availability indefinitely, as long as funds are available."]}),"\n",(0,i.jsxs)(s.h4,{id:"handling-inconsistent-blobs",children:["Handling inconsistent ","blobs"]}),"\n",(0,i.jsxs)(s.p,{children:["If a ","blob ID"," is not correctly encoded, an ",(0,i.jsx)(s.a,{href:"/docs/system-overview/red-stuff",children:"inconsistency proof certificate"})," can be submitted on-chain. This emits an inconsistent ","blob"," event, signaling that reads for that ","blob ID"," always return ",(0,i.jsx)(s.code,{children:"None"})," and that ","storage nodes"," can delete its slivers (except for an indicator to return ",(0,i.jsx)(s.code,{children:"None"}),")."]}),"\n",(0,i.jsx)(s.h2,{id:"acquiring-storage-resources",children:"Acquiring storage resources"}),"\n",(0,i.jsx)(s.p,{children:"You can acquire storage resources through 3 methods:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Purchase from the system contract:"})," Pay ","WAL"," to buy a storage resource for a specific size and duration. Run ",(0,i.jsx)(s.code,{children:"walrus info"})," to see current prices."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Reuse existing resources:"})," The CLI automatically uses any ",(0,i.jsx)(o,{lookup:"User",children:"user"}),"-owned storage resource of appropriate size and duration before purchasing new storage."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Transfer or trade:"})," Storage resources can be transferred between users or acquired through marketplace implementations."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"optimizing-costs",children:"Optimizing costs"}),"\n",(0,i.jsxs)(s.h4,{id:"reducing-costs-for-small-blobs-with-quilt",children:["Reducing costs for small ","blobs"," with Quilt"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.a,{href:"/docs/system-overview/quilt",children:"Walrus Quilt"})," is a batch storage tool that amortizes metadata costs across multiple ","blobs"," stored together. It can also significantly reduce Sui computation and storage costs."]}),"\n",(0,i.jsx)(s.h4,{id:"buy-storage-resources-in-bulk",children:"Buy storage resources in bulk"}),"\n",(0,i.jsxs)(s.p,{children:["Purchasing larger storage resources at once, both in size and duration, minimizes SUI gas costs per unit. You can split and merge these resources as needed for smaller ","blobs"," or shorter durations."]}),"\n",(0,i.jsx)(s.h4,{id:"use-sui-ptbs-efficiently",children:"Use Sui PTBs efficiently"}),"\n",(0,i.jsxs)(s.p,{children:["Pack multiple smart contract calls into a single ",(0,i.jsx)(s.a,{href:"https://docs.sui.io/concepts/transactions/prog-txn-blocks",children:"Sui programmable transaction block (PTB)"})," to manage resource acquisition, splitting, and merging. This reduces both latency and costs."]}),"\n",(0,i.jsx)(s.h4,{id:"reclaim-and-reuse-storage",children:"Reclaim and reuse storage"}),"\n",(0,i.jsxs)(s.p,{children:["You can reclaim storage resources by deleting non-expired ","blobs"," that were created as deletable. If your app only needs to store data for less than 1 epoch (2 weeks on Mainnet), actively deleting ","blobs"," and reusing storage space reduces costs."]}),"\n",(0,i.jsxs)(s.h4,{id:"batch-blob-operations",children:["Batch ","blob"," operations"]}),"\n",(0,i.jsxs)(s.p,{children:["You can register or certify multiple ","blobs"," in a single Sui PTB to reduce latency and gas costs. The CLI uses this approach when uploading multiple ","blobs"," at once."]}),"\n",(0,i.jsxs)(s.h4,{id:"manage-blob-object-lifecycle",children:["Manage ","blob"," object lifecycle"]}),"\n",(0,i.jsxs)(s.p,{children:["Each stored ","blob"," creates a small Sui object. Once a ","blob"," expires, burn the object to reclaim most of its Sui storage cost through a ",(0,i.jsx)(s.a,{href:"https://docs.sui.io/concepts/sui-architecture/sui-storage#storage-rebates",children:"storage rebate"}),". Burning the object does not delete the ","blob"," data on Walrus."]}),"\n",(0,i.jsxs)(s.p,{children:["If you no longer need lifecycle operations (extending lifetime, deleting, or adding attributes), burn the ","blob"," object through the CLI or a smart contract call to save on Sui storage costs. Depending on the relative costs of SUI and ","WAL",", it might be cheaper to burn a long-lived ","blob"," object and re-register and re-certify it near expiration than to hold the object for the full duration."]})]})}function u(e={}){let{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);