openapi: 3.1.0
info:
  title: Walrus Daemon
  description: ''
  contact:
    name: Mysten Labs
    email: build@mystenlabs.com
  license:
    name: Apache-2.0
    identifier: Apache-2.0
  version: <VERSION>
paths:
  /v1/blobs:
    put:
      tags:
      - routes
      summary: Store a blob on Walrus.
      description: |-
        Store a (potentially deletable) blob on Walrus for 1 or more epochs. The associated on-Sui
        object can be sent to a specified Sui address.
      operationId: put_blob
      parameters:
      - name: encoding_type
        in: query
        description: The encoding type to use for the blob.
        required: false
        schema:
          $ref: '#/components/schemas/EncodingType'
        style: form
      - name: epochs
        in: query
        description: |-
          The number of epochs, ahead of the current one, for which to store the blob.

          The default is 1 epoch.
        required: false
        schema:
          $ref: '#/components/schemas/u32'
        style: form
      - name: deletable
        in: query
        description: |-
          If true, the publisher creates a deletable blob.

          New blobs are created as deletable by default since v1.33, and this flag is no longer
          required.
        required: false
        deprecated: true
        schema:
          type: boolean
        style: form
      - name: permanent
        in: query
        description: |-
          If true, the publisher creates a permanent blob instead of a deletable one.

          This was the default behavior before v1.33, but *blobs are now deletable by default*.
        required: false
        schema:
          type: boolean
        style: form
      - name: force
        in: query
        description: |-
          If true, the publisher will always store the blob, creating a new Blob object.

          The blob will be stored even if the blob is already certified on Walrus for the specified
          number of epochs.
        required: false
        schema:
          type: boolean
        style: form
      - name: quilt_version
        in: query
        description: |-
          The quilt version to use (for quilt endpoints only).
          Valid values: "v1", "V1", or "1". Defaults to "v1" if not specified.
        required: false
        schema:
          $ref: '#/components/schemas/QuiltVersionEnum'
        style: form
      - name: send_or_share
        in: query
        required: false
        schema:
          oneOf:
          - type: object
            description: Send the blob to the specified Sui address.
            required:
            - send_object_to
            properties:
              send_object_to:
                $ref: '#/components/schemas/SuiAddress'
                description: Send the blob to the specified Sui address.
          - type: object
            description: Turn the created blob into a shared blob.
            required:
            - share
            properties:
              share:
                type: boolean
                description: Turn the created blob into a shared blob.
          description: The exclusive option to share the blob or to send it to an address.
        style: form
      requestBody:
        description: Binary data of the unencoded blob to be stored.
        content:
          application/octet-stream:
            schema:
              $ref: '#/components/schemas/Binary'
        required: true
      responses:
        '200':
          description: The blob was stored successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BlobStoreResult'
        '400':
          description: May be returned when (1) The blob cannot be defined as both deletable and permanent. (2) The request is malformed.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '413':
          description: The blob is too large
        '451':
          description: The blob cannot be returned as it has been blocked.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '500':
          description: An internal server error has occurred. Please report this error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '504':
          description: The service failed to store the blob to sufficient Walrus storage nodes before a timeout, please retry the operation.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
  /v1/blobs/by-object-id/{blob_object_id}:
    get:
      tags:
      - routes
      summary: Retrieve a Walrus blob with its associated attribute.
      description: |-
        First retrieves the blob metadata from Sui using the provided object ID (either of the blob
        object or a shared blob), then uses the blob ID from that metadata to fetch the actual blob
        data via the get_blob function. The response includes the raw data along with any attribute
        headers from the metadata that are present in the configured allowed_headers set.
      operationId: get_blob_by_object_id
      parameters:
      - name: blob_object_id
        in: path
        required: true
        schema:
          $ref: '#/components/schemas/ObjectID'
      responses:
        '200':
          description: The blob was reconstructed successfully. Any attribute headers present in this aggregator's allowed_headers configuration will be included in the response.
          content:
            application/octet-stream:
              schema:
                type: array
                items:
                  type: integer
                  format: int32
                  minimum: 0
        '400':
          description: The consistency check options are invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '403':
          description: The blob size exceeds the maximum allowed size that was configured for this service. The blob is still stored on Walrus and may be accessible through a different aggregator or the CLI.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '404':
          description: May be returned when (1) The requested blob has not yet been stored on Walrus. (2) The requested quilt patch does not exist on Walrus.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '416':
          description: The byte range parameters are invalid. This error is returned when the byte range parameters are invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '451':
          description: The blob cannot be returned as has been blocked.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '500':
          description: An internal server error has occurred. Please report this error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
  /v1/blobs/by-quilt-id/{quilt_id}/{identifier}:
    get:
      tags:
      - routes
      summary: Retrieve a patch from a Walrus quilt by its quilt ID and identifier.
      description: |-
        Takes a quilt ID and an identifier and returns the corresponding patch from the quilt.
        The patch content is returned as raw bytes in the response body, while metadata
        such as the patch identifier and tags are returned in response headers.

        # Example
        ```bash
        curl -X GET "$aggregator/v1/blobs/by-quilt-id/\
        rkcHpHQrornOymttgvSq3zvcmQEsMqzmeUM1HSY4ShU/my-file.txt"
        ```

        Response:
        ```text
        HTTP/1.1 200 OK
        Content-Type: application/octet-stream
        X-Quilt-Patch-Identifier: my-file.txt
        ETag: "rkcHpHQrornOymttgvSq3zvcmQEsMqzmeUM1HSY4ShU"

        [raw data]
        ```
      operationId: get_patch_by_quilt_id_and_identifier
      parameters:
      - name: quilt_id
        in: path
        description: The quilt's blob ID.
        required: true
        schema:
          $ref: '#/components/schemas/BlobId'
      - name: identifier
        in: path
        description: The identifier of the patch within the quilt
        required: true
        schema:
          type: string
        example: my-file.txt
      responses:
        '200':
          description: The patch was retrieved successfully. Returns the raw bytes of the patch; the identifier and other attributes are returned as headers.
          content:
            application/octet-stream:
              schema:
                type: array
                items:
                  type: integer
                  format: int32
                  minimum: 0
        '403':
          description: The blob size exceeds the maximum allowed size that was configured for this service. The blob is still stored on Walrus and may be accessible through a different aggregator or the CLI.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '404':
          description: May be returned when (1) The requested blob has not yet been stored on Walrus. (2) The requested quilt patch does not exist on Walrus.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '416':
          description: The byte range parameters are invalid. This error is returned when the byte range parameters are invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '451':
          description: The blob cannot be returned as has been blocked.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '500':
          description: An internal server error has occurred. Please report this error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
  /v1/blobs/by-quilt-patch-id/{quilt_patch_id}:
    get:
      tags:
      - routes
      summary: Retrieve a patch from a Walrus quilt by its quilt patch ID.
      description: |-
        Takes a quilt patch ID and returns the corresponding patch from the quilt.
        The patch content is returned as raw bytes in the response body, while metadata
        such as the patch identifier and tags are returned in response headers.

        # Example
        ```bash
        curl -X GET "$AGGREGATOR/v1/blobs/by-quilt-patch-id/\
        DJHLsgUoKQKEPcw3uehNQwuJjMu5a2sRdn8r-f7iWSAAC8Pw"
        ```

        Response:
        ```text
        HTTP/1.1 200 OK
        Content-Type: application/octet-stream
        X-Quilt-Patch-Identifier: my-file.txt
        ETag: "DJHLsgUoKQKEPcw3uehNQwuJjMu5a2sRdn8r-f7iWSAAC8Pw"

        [raw data]
        ```
      operationId: get_patch_by_quilt_patch_id
      parameters:
      - name: quilt_patch_id
        in: path
        description: The quilt patch ID encoded as a URL-safe base64 string, without the trailing equal (=) signs.
        required: true
        schema:
          $ref: '#/components/schemas/QuiltPatchId'
        example: DJHLsgUoKQKEPcw3uehNQwuJjMu5a2sRdn8r-f7iWSAAC8Pw
      responses:
        '200':
          description: The patch was retrieved successfully. Returns the raw bytes of the patch; the identifier and other attributes are returned as header.
          content:
            application/octet-stream:
              schema:
                type: array
                items:
                  type: integer
                  format: int32
                  minimum: 0
        '403':
          description: The blob size exceeds the maximum allowed size that was configured for this service. The blob is still stored on Walrus and may be accessible through a different aggregator or the CLI.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '404':
          description: May be returned when (1) The requested blob has not yet been stored on Walrus. (2) The requested quilt patch does not exist on Walrus.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '416':
          description: The byte range parameters are invalid. This error is returned when the byte range parameters are invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '451':
          description: The blob cannot be returned as has been blocked.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '500':
          description: An internal server error has occurred. Please report this error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
  /v1/blobs/{blob_id}:
    get:
      tags:
      - routes
      summary: Retrieve a Walrus blob.
      description: |-
        Reconstructs the blob identified by the provided blob ID from Walrus and returns its raw data.

        # HTTP Range Support

        This endpoint also accepts the HTTP `Range` header to request only a portion of the blob.
        When a `Range` header is provided with a specific byte range (e.g., `bytes=100-199`), the
        endpoint returns HTTP 206 Partial Content with the requested byte range.

        **Important**: When using byte range requests, only the consistency of the individual fetched
        slivers is validated. The entire blob's consistency is NOT validated, which provides better
        performance for partial reads but with reduced integrity guarantees compared to full blob reads.

        # Range Header Format

        - `bytes=start-end`: Returns bytes from start to end (inclusive)

        # Examples

        ```bash
        # Get full blob
        curl "$AGGREGATOR/v1/blobs/{blob_id}"

        # Get first 1000 bytes
        curl -H "Range: bytes=0-999" "$AGGREGATOR/v1/blobs/{blob_id}"
      operationId: get_blob
      parameters:
      - name: blob_id
        in: path
        required: true
        schema:
          $ref: '#/components/schemas/BlobId'
      - name: strict_consistency_check
        in: query
        description: |-
          Whether to perform a strict consistency check.

          This was the default before `v1.37`. In `v1.37`, the default consistency was changed to a
          more performant one, which is sufficient for the majority of cases. This flag can be used to
          enable the previous strict consistency check. See
          <https://docs.wal.app/design/encoding.html#data-integrity-and-consistency> for more details.
        required: false
        schema:
          type: boolean
        style: form
      - name: skip_consistency_check
        in: query
        description: |-
          Whether to skip consistency checks entirely.

          When enabled, this flag bypasses all consistency verification during blob reading. This
          should be used only when the writer of the blob is trusted. Does *not* affect any
          authentication checks for data received from storage nodes, which are always performed.
        required: false
        schema:
          type: boolean
        style: form
      responses:
        '200':
          description: The blob was reconstructed successfully
          content:
            application/octet-stream:
              schema:
                type: array
                items:
                  type: integer
                  format: int32
                  minimum: 0
        '400':
          description: The consistency check options are invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '403':
          description: The blob size exceeds the maximum allowed size that was configured for this service. The blob is still stored on Walrus and may be accessible through a different aggregator or the CLI.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '404':
          description: May be returned when (1) The requested blob has not yet been stored on Walrus. (2) The requested quilt patch does not exist on Walrus.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '416':
          description: The byte range parameters are invalid. This error is returned when the byte range parameters are invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '451':
          description: The blob cannot be returned as has been blocked.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '500':
          description: An internal server error has occurred. Please report this error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
  /v1/blobs/{blob_id}/byte-range:
    get:
      tags:
      - routes
      summary: Retrieve a specific byte range from a Walrus blob.
      description: |-
        Reads a specific portion of a blob identified by the blob ID, starting from a given byte
        position and reading a specified number of bytes. This is more efficient than retrieving the
        entire blob when only a portion is needed.

        Note that this endpoint has reduced consistency guarantees compared to the full blob read
        since it will only validate the consistency of individual fetched slivers.

        # Query Parameters
        - `start`: The starting byte position (0-indexed, inclusive)
        - `length`: The number of bytes to read

        # Validation
        - `start` and `length` must not overflow when added together
        - The byte range `[start, start + length)` must be within the blob's size
        - `length` must be greater than 0

        # Example
        ```bash
        # Read 1024 bytes starting from position 0
        curl "$AGGREGATOR/v1/blobs/{blob_id}/byte-range?start=0&length=1024"
        ```
      operationId: get_blob_byte_range
      parameters:
      - name: blob_id
        in: path
        required: true
        schema:
          $ref: '#/components/schemas/BlobId'
      - name: start
        in: query
        description: The starting byte position (0-indexed, inclusive).
        required: true
        schema:
          type: integer
          minimum: 0
        style: form
      - name: length
        in: query
        description: The number of bytes to read.
        required: true
        schema:
          type: integer
          minimum: 0
        style: form
      responses:
        '200':
          description: The byte range was read successfully
          content:
            application/octet-stream:
              schema:
                type: array
                items:
                  type: integer
                  format: int32
                  minimum: 0
        '400':
          description: The byte range parameters are invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '403':
          description: The blob size exceeds the maximum allowed size that was configured for this service.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '404':
          description: The requested blob has not yet been stored on Walrus.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '451':
          description: The blob cannot be returned as it has been blocked.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '500':
          description: An internal server error has occurred. Please report this error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
  /v1/quilts:
    put:
      tags:
      - routes
      summary: Store multiple files as a quilt using multipart/form-data.
      description: |-
        Accepts a multipart form with files and optional per-file Walrus-native metadata.
        The form contains:
        - Files identified by their identifiers as field names
        - An optional `_metadata` field containing a JSON array with per-file Walrus-native metadata

        # Contents of Walrus-native metadata
        - `identifier`: The identifier of the file, must match the corresponding file field name
        - `tags`: JSON object with string key-value pairs (optional)

        Files without corresponding metadata entries will be stored with empty tags.

        # Examples

        ## Files without Walrus-native metadata, with quilt version V1
        ```bash
        curl -X PUT "$PUBLISHER/v1/quilts?epochs=5&quilt_version=V1" \
          -F "contract-v2=@document.pdf" \
          -F "logo-2024=@image.png"
        ```

        ## Files with Walrus-native metadata, with default quilt version
        ```bash
        curl -X PUT "$PUBLISHER/v1/quilts?epochs=5" \
          -F "quilt-manual=@document.pdf" \
          -F "logo-2025=@image.png" \
          -F "_metadata=[
            {"identifier": "quilt-manual", "tags": {"creator": "walrus", "version": "1.0"}},
            {"identifier": "logo-2025", "tags": {"type": "logo", "format": "png"}}
          ]'
        ```
      operationId: put_quilt
      parameters:
      - name: encoding_type
        in: query
        description: The encoding type to use for the blob.
        required: false
        schema:
          $ref: '#/components/schemas/EncodingType'
        style: form
      - name: epochs
        in: query
        description: |-
          The number of epochs, ahead of the current one, for which to store the blob.

          The default is 1 epoch.
        required: false
        schema:
          $ref: '#/components/schemas/u32'
        style: form
      - name: deletable
        in: query
        description: |-
          If true, the publisher creates a deletable blob.

          New blobs are created as deletable by default since v1.33, and this flag is no longer
          required.
        required: false
        deprecated: true
        schema:
          type: boolean
        style: form
      - name: permanent
        in: query
        description: |-
          If true, the publisher creates a permanent blob instead of a deletable one.

          This was the default behavior before v1.33, but *blobs are now deletable by default*.
        required: false
        schema:
          type: boolean
        style: form
      - name: force
        in: query
        description: |-
          If true, the publisher will always store the blob, creating a new Blob object.

          The blob will be stored even if the blob is already certified on Walrus for the specified
          number of epochs.
        required: false
        schema:
          type: boolean
        style: form
      - name: quilt_version
        in: query
        description: |-
          The quilt version to use (for quilt endpoints only).
          Valid values: "v1", "V1", or "1". Defaults to "v1" if not specified.
        required: false
        schema:
          $ref: '#/components/schemas/QuiltVersionEnum'
        style: form
      - name: send_or_share
        in: query
        required: false
        schema:
          oneOf:
          - type: object
            description: Send the blob to the specified Sui address.
            required:
            - send_object_to
            properties:
              send_object_to:
                $ref: '#/components/schemas/SuiAddress'
                description: Send the blob to the specified Sui address.
          - type: object
            description: Turn the created blob into a shared blob.
            required:
            - share
            properties:
              share:
                type: boolean
                description: Turn the created blob into a shared blob.
          description: The exclusive option to share the blob or to send it to an address.
        style: form
      requestBody:
        description: Multipart form with files and their Walrus-native metadata
        content:
          multipart/form-data: {}
      responses:
        '200':
          description: The quilt was stored successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuiltStoreResult'
        '400':
          description: May be returned when (1) The blob cannot be defined as both deletable and permanent. (2) The request is malformed.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '413':
          description: The quilt is too large
        '451':
          description: The blob cannot be returned as it has been blocked.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '500':
          description: An internal server error has occurred. Please report this error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '504':
          description: The service failed to store the blob to sufficient Walrus storage nodes before a timeout, please retry the operation.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
  /v1/quilts/{quilt_id}/patches:
    get:
      tags:
      - routes
      summary: List patches in a quilt.
      description: |-
        Returns a list of identifiers and quilt patch IDs for all patches contained in the specified
        quilt. Each quilt patch ID can be used with the `/v1/blobs/by-quilt-patch-id` endpoint to
        retrieve the actual blob data.

        # Example
        ```bash
        curl -X GET "$aggregator/v1/quilts/patches-by-id/\
        rkcHpHQrornOymttgvSq3zvcmQEsMqzmeUM1HSY4ShU"
        ```

        Response:
        ```json
        [
          {
            "identifier": "walrus-38.jpeg",
            "patch_id": "uIiEbhP2qgZYygEGxJX1GeB-rQATo2yufC2DCp7B4iABAQANAA"
          },
          {
            "identifier": "walrus-39.avif",
            "patch_id": "uIiEbhP2qgZYygEGxJX1GeB-rQATo2yufC2DCp7B4iABDQBnAA"
          }
        ]
        ```
      operationId: list_patches_in_quilt
      parameters:
      - name: quilt_id
        in: path
        description: The quilt ID encoded as URL-safe base64
        required: true
        schema:
          $ref: '#/components/schemas/BlobId'
        example: rkcHpHQrornOymttgvSq3zvcmQEsMqzmeUM1HSY4ShU
      responses:
        '200':
          description: Successfully retrieved the list of patches in the quilt
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/QuiltPatchItem'
        '403':
          description: The blob size exceeds the maximum allowed size that was configured for this service. The blob is still stored on Walrus and may be accessible through a different aggregator or the CLI.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '404':
          description: May be returned when (1) The requested blob has not yet been stored on Walrus. (2) The requested quilt patch does not exist on Walrus.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '416':
          description: The byte range parameters are invalid. This error is returned when the byte range parameters are invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '451':
          description: The blob cannot be returned as has been blocked.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '500':
          description: An internal server error has occurred. Please report this error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
  /v1alpha/blobs/concat:
    get:
      tags:
      - routes
      summary: Concatenate and stream multiple blobs via GET.
      description: |-
        Retrieves multiple blobs specified by comma-separated blob IDs or object IDs in the query
        parameter, and streams them concatenated in the order specified. Each blob is loaded,
        streamed, and then freed from memory before the next blob is processed.
      operationId: get_blobs_concat
      parameters:
      - name: ids
        in: query
        description: Comma-separated list of blob IDs or object IDs to concatenate.
        required: true
        schema:
          type: string
        style: form
      - name: read_options
        in: query
        description: Consistency check options for reading the blobs.
        required: true
        schema:
          $ref: '#/components/schemas/ReadOptions'
        style: form
      responses:
        '200':
          description: Blobs concatenated and streamed successfully
          content:
            application/octet-stream:
              schema:
                type: array
                items:
                  type: integer
                  format: int32
                  minimum: 0
        '400':
          description: The consistency check options are invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '403':
          description: One of the blobs exceeds the maximum allowed size.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '404':
          description: May be returned when (1) Failed to resolve an object ID to a blob ID. (2) One of the requested blobs was not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '451':
          description: One of the blobs is blocked.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '500':
          description: Failed to read a blob.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
    post:
      tags:
      - routes
      summary: Concatenate and stream multiple blobs via POST.
      description: |-
        Retrieves multiple blobs specified in a JSON request body containing an array of blob IDs
        or object IDs, and streams them concatenated in the order specified. Each blob is loaded,
        streamed, and then freed from memory before the next blob is processed.
      operationId: post_blobs_concat
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConcatRequestBody'
        required: true
      responses:
        '200':
          description: Blobs concatenated and streamed successfully
          content:
            application/octet-stream:
              schema:
                type: array
                items:
                  type: integer
                  format: int32
                  minimum: 0
        '400':
          description: The consistency check options are invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '403':
          description: One of the blobs exceeds the maximum allowed size.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '404':
          description: May be returned when (1) Failed to resolve an object ID to a blob ID. (2) One of the requested blobs was not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '451':
          description: One of the blobs is blocked.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '500':
          description: Failed to read a blob.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
components:
  schemas:
    Binary:
      type: string
      format: binary
    Blob:
      type: object
      description: Sui object for a blob.
      required:
      - id
      - registeredEpoch
      - blobId
      - size
      - encodingType
      - storage
      - deletable
      properties:
        blobId:
          $ref: '#/components/schemas/BlobId'
          description: The blob ID.
        certifiedEpoch:
          oneOf:
          - type: 'null'
          - $ref: '#/components/schemas/u32'
            description: The epoch in which the blob was first certified, `None` if the blob is uncertified.
        deletable:
          type: boolean
          description: Marks the blob as deletable.
        encodingType:
          $ref: '#/components/schemas/EncodingType'
          description: The encoding coding type used for the blob.
        id:
          $ref: '#/components/schemas/ObjectID'
        registeredEpoch:
          $ref: '#/components/schemas/u32'
          description: The epoch in which the blob has been registered.
        size:
          type: integer
          format: int64
          description: The (unencoded) size of the blob.
          minimum: 0
        storage:
          $ref: '#/components/schemas/StorageResource'
          description: The [`StorageResource`] used to store the blob.
    BlobId:
      type: string
      format: byte
      description: The ID of a blob.
      examples:
      - E7_nNXvFU_3qZVu3OH1yycRG7LZlyn1-UxEDCDDqGGU
    BlobStoreResult:
      oneOf:
      - type: object
        description: |-
          The blob already exists within Walrus, was certified, and is stored for at least the
          intended duration.
        required:
        - alreadyCertified
        properties:
          alreadyCertified:
            allOf:
            - $ref: '#/components/schemas/EventOrObjectId'
              description: |-
                The event where the blob was certified, or the object ID of the registered blob.

                The object ID of the registered blob is used in place of the event ID when the blob is
                deletable, already certified, and owned by the client.
            - type: object
              required:
              - blob_id
              - end_epoch
              properties:
                blob_id:
                  $ref: '#/components/schemas/BlobId'
                  description: The blob ID.
                end_epoch:
                  type: integer
                  format: int64
                  description: The epoch until which the blob is stored (exclusive).
                  minimum: 0
            description: |-
              The blob already exists within Walrus, was certified, and is stored for at least the
              intended duration.
      - type: object
        description: |-
          The blob was newly created; this contains the newly created Sui object associated with the
          blob.
        required:
        - newlyCreated
        properties:
          newlyCreated:
            type: object
            description: |-
              The blob was newly created; this contains the newly created Sui object associated with the
              blob.
            required:
            - blob_object
            - resource_operation
            - cost
            properties:
              blob_object:
                $ref: '#/components/schemas/Blob'
                description: The Sui blob object that holds the newly created blob.
              cost:
                type: integer
                format: int64
                description: The storage cost, excluding gas.
                minimum: 0
              resource_operation:
                $ref: '#/components/schemas/RegisterBlobOp'
                description: The operation that created the blob.
              shared_blob_object:
                oneOf:
                - type: 'null'
                - $ref: '#/components/schemas/ObjectID'
                  description: The shared blob object ID if created.
      - type: object
        description: |-
          The blob is known to Walrus but was marked as invalid.

          This indicates a bug within the client, the storage nodes, or more than a third malicious
          storage nodes.
        required:
        - markedInvalid
        properties:
          markedInvalid:
            type: object
            description: |-
              The blob is known to Walrus but was marked as invalid.

              This indicates a bug within the client, the storage nodes, or more than a third malicious
              storage nodes.
            required:
            - blob_id
            - event
            properties:
              blob_id:
                $ref: '#/components/schemas/BlobId'
                description: The blob ID.
              event:
                $ref: '#/components/schemas/EventID'
                description: The event where the blob was marked as invalid.
      - type: object
        description: Operation failed.
        required:
        - error
        properties:
          error:
            type: object
            description: Operation failed.
            required:
            - failure_phase
            - error_msg
            properties:
              blob_id:
                oneOf:
                - type: 'null'
                - $ref: '#/components/schemas/BlobId'
                  description: The blob ID.
              error_msg:
                type: string
                description: The error message.
              failure_phase:
                type: string
                description: The phase after the error occurred.
      description: Result when attempting to store a blob.
    ConcatQueryParams:
      allOf:
      - $ref: '#/components/schemas/ReadOptions'
        description: Consistency check options for reading the blobs.
      - type: object
        required:
        - ids
        properties:
          ids:
            type: string
            description: Comma-separated list of blob IDs or object IDs to concatenate.
      description: The query parameters for concatenating multiple blobs.
    ConcatRequestBody:
      type: object
      description: The request body for concatenating multiple blobs via POST.
      required:
      - ids
      properties:
        ids:
          type: array
          items:
            type: string
          description: List of blob IDs or object IDs to concatenate.
        skip_consistency_check:
          type:
          - boolean
          - 'null'
          description: Whether to skip consistency checks entirely.
        strict_consistency_check:
          type:
          - boolean
          - 'null'
          description: Whether to perform a strict consistency check.
      additionalProperties: false
    EncodingType:
      type: string
      description: Supported Walrus encoding types.
      enum:
      - RS2
    Epoch:
      type: integer
      format: int32
      description: Walrus epoch.
      minimum: 0
    EventID:
      type: object
      description: Schema for the [`sui_types::event::EventID`] type.
      required:
      - txDigest
      - eventSeq
      properties:
        eventSeq:
          type: string
        txDigest:
          type: array
          items:
            type: integer
            format: byte
            minimum: 0
      examples:
      - txDigest: EhtoQF9UpPyg5PsPUs69LdkcRrjQ3R4cTsHnwxZVTNrC
        eventSeq: 0
    EventOrObjectId:
      oneOf:
      - type: object
        description: The variant representing an event ID.
        required:
        - event
        properties:
          event:
            $ref: '#/components/schemas/EventID'
            description: The variant representing an event ID.
      - type: object
        description: The variant representing an object ID.
        required:
        - object
        properties:
          object:
            $ref: '#/components/schemas/ObjectID'
            description: The variant representing an object ID.
      description: Either an event ID or an object ID.
    ObjectID:
      type: string
      title: Sui object ID
      description: Sui object ID as a hexadecimal string
      examples:
      - 0x56ae1c86e17db174ea002f8340e28880bc8a8587c56e8604a4fa6b1170b23a60
    QuiltPatchId:
      type: object
      description: |-
        A QuiltPatchId is a globally unique id for a quilt patch.

        A quilt patch is a individual blob within a quilt.
      required:
      - quiltId
      - patchIdBytes
      properties:
        patchIdBytes:
          type: array
          items:
            type: integer
            format: int32
            minimum: 0
          description: The patch id of the quilt patch.
        quiltId:
          $ref: '#/components/schemas/BlobId'
          description: The BlobId of the quilt as a Walrus blob.
    QuiltPatchItem:
      type: object
      description: Response item for a patch in a quilt.
      required:
      - identifier
      - patch_id
      - tags
      properties:
        identifier:
          type: string
          description: The identifier of the patch (e.g., filename).
        patch_id:
          $ref: '#/components/schemas/QuiltPatchId'
          description: |-
            The patch ID for this patch, encoded as a URL-safe base64 string, without the trailing equal
            (=) signs.
        tags:
          type: object
          description: Tags for the patch.
          additionalProperties:
            type: string
          propertyNames:
            type: string
    QuiltStoreResult:
      type: object
      description: Result when attempting to store a quilt.
      required:
      - blobStoreResult
      - storedQuiltBlobs
      properties:
        blobStoreResult:
          $ref: '#/components/schemas/BlobStoreResult'
          description: The result of storing the quilt data as a blob.
        storedQuiltBlobs:
          type: array
          items:
            $ref: '#/components/schemas/StoredQuiltPatch'
          description: The structure of the quilt.
    ReadOptions:
      type: object
      description: The query parameters for a read operation.
      properties:
        skip_consistency_check:
          type: boolean
          description: |-
            Whether to skip consistency checks entirely.

            When enabled, this flag bypasses all consistency verification during blob reading. This
            should be used only when the writer of the blob is trusted. Does *not* affect any
            authentication checks for data received from storage nodes, which are always performed.
        strict_consistency_check:
          type: boolean
          description: |-
            Whether to perform a strict consistency check.

            This was the default before `v1.37`. In `v1.37`, the default consistency was changed to a
            more performant one, which is sufficient for the majority of cases. This flag can be used to
            enable the previous strict consistency check. See
            <https://docs.wal.app/design/encoding.html#data-integrity-and-consistency> for more details.
      additionalProperties: false
    RegisterBlobOp:
      oneOf:
      - type: object
        description: The storage and blob resources are purchased from scratch.
        required:
        - registerFromScratch
        properties:
          registerFromScratch:
            type: object
            description: The storage and blob resources are purchased from scratch.
            required:
            - encoded_length
            - epochs_ahead
            properties:
              encoded_length:
                type: integer
                format: int64
                description: The size of the encoded blob in bytes.
                minimum: 0
              epochs_ahead:
                type: integer
                format: int32
                description: The number of epochs ahead for which the blob is registered.
                minimum: 0
      - type: object
        description: The storage is reused, but the blob was not registered.
        required:
        - reuseStorage
        properties:
          reuseStorage:
            type: object
            description: The storage is reused, but the blob was not registered.
            required:
            - encoded_length
            properties:
              encoded_length:
                type: integer
                format: int64
                description: The size of the encoded blob in bytes.
                minimum: 0
      - type: object
        description: A matching registration was already present in the wallet.
        required:
        - reuseRegistration
        properties:
          reuseRegistration:
            type: object
            description: A matching registration was already present in the wallet.
            required:
            - encoded_length
            properties:
              encoded_length:
                type: integer
                format: int64
                description: The size of the encoded blob in bytes.
                minimum: 0
      - type: object
        description: The blob was already certified, but its lifetime is too short.
        required:
        - reuseAndExtend
        properties:
          reuseAndExtend:
            type: object
            description: The blob was already certified, but its lifetime is too short.
            required:
            - encoded_length
            - epochs_extended
            properties:
              encoded_length:
                type: integer
                format: int64
                description: The size of the encoded blob in bytes.
                minimum: 0
              epochs_extended:
                type: integer
                format: int32
                description: The number of epochs extended wrt the original epoch end.
                minimum: 0
      - type: object
        description: |-
          The blob was registered, but not certified, and its lifetime is shorter than
          the desired one.
        required:
        - reuseAndExtendNonCertified
        properties:
          reuseAndExtendNonCertified:
            type: object
            description: |-
              The blob was registered, but not certified, and its lifetime is shorter than
              the desired one.
            required:
            - encoded_length
            - epochs_extended
            properties:
              encoded_length:
                type: integer
                format: int64
                description: The size of the encoded blob in bytes.
                minimum: 0
              epochs_extended:
                type: integer
                format: int32
                description: The number of epochs extended wrt the original epoch end.
                minimum: 0
      description: The operation performed on blob and storage resources to register a blob.
    Status:
      type: object
      description: |-
        A message returned from a failed API call.

        Contains both human-readable and machine-readable details of the error,
        to assist in resolving the error.
      required:
      - error
      properties:
        error:
          allOf:
          - oneOf:
            - type: object
              required:
              - status
              - code
              properties:
                code:
                  type: integer
                  format: int32
                  description: HTTP status code associated with the error.
                  minimum: 0
                status:
                  type: string
                  description: General type of error, given as an UPPER_SNAKE_CASE string.
            description: The status code corresponding to the error.
          - type: object
            required:
            - message
            - details
            properties:
              details:
                type: array
                items:
                  type: object
                description: |-
                  Machine readable details of the error.

                  Always contains an [`ErrorInfo`], which provides a machine-readable
                  representation of the of the `message` field.
              message:
                type: string
                description: A message describing the error in detail.
    StorageResource:
      type: object
      description: Sui object for storage resources.
      required:
      - id
      - startEpoch
      - endEpoch
      - storageSize
      properties:
        endEpoch:
          $ref: '#/components/schemas/u32'
          description: The end epoch of the resource (exclusive).
        id:
          $ref: '#/components/schemas/ObjectID'
        startEpoch:
          $ref: '#/components/schemas/u32'
          description: The start epoch of the resource (inclusive).
        storageSize:
          type: integer
          format: int64
          description: The total amount of reserved storage.
          minimum: 0
    StoredQuiltPatch:
      type: object
      description: Identifies a stored quilt patch.
      required:
      - identifier
      - quiltPatchId
      properties:
        identifier:
          type: string
          description: The identifier of the quilt patch.
        quiltPatchId:
          type: string
          description: The quilt patch id.
        range:
          type:
          - array
          - 'null'
          items: false
          prefixItems:
          - type: integer
            format: int64
            minimum: 0
          - type: integer
            format: int64
            minimum: 0
          description: The range of the quilt patch.
    SuiAddress:
      type: string
      title: Sui address
      description: Sui address encoded as a hexadecimal string
      examples:
      - 0x02a212de6a9dfa3a69e22387acfbafbb1a9e591bd9d636e7895dcfc8de0
    u32:
      type: integer
      format: int32
      minimum: 0
